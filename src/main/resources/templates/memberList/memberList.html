<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>회원 목록</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="/css/memberList.css">
</head>
<body>
<th:block th:replace="fragments/header :: headerFragment"></th:block>
<th:block th:replace="fragments/sidebar :: sideBarFragment"></th:block>

<div class="row">
    <div class="column side">
        <h2>회원 관리</h2>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit..</p>
    </div>
    <div class="column middle">
        <h2>회원 목록</h2>
        <form action="/memberList" method="get">
            <div class="col-md-8 mb-3">
                <select id="searchBox" class="custom-select d-block w-100" name="select">
                    <option value="이름" th:selected="${#strings.equals(param.select, 'name')}">이름</option>
                    <option value="학과" th:selected="${#strings.equals(param.select, 'department')}">학과</option>
                </select> <input type="text" class="form-control" name="word"
                                 placeholder="검색어" th:selected="${#strings.equals(param.word, '')}" required>
                <input type="submit" value="검색">
            </div>
        </form>

        <form th:action="@{/memberList/delMember}" method="post">
            <table>
                <thead>
                <tr>
                    <th>번호</th>
                    <th>이름</th>
                    <th>학과</th>
                    <th>학번</th>
                    <th>성별</th>
                    <th>휴대전화</th>
                    <th>선택</th>
                </tr>
                </thead>

                <tbody th:each="m : ${memberList}">
                <tr>
                    <td th:onclick="|location.href='@{/memberList/detail(num=${m.num})}'|" th:text="${m.n}">번호</td>
                    <td th:onclick="|location.href='@{/memberList/detail(num=${m.num})}'|" th:text="${m.name}">이름</td>
                    <td th:onclick="|location.href='@{/memberList/detail(num=${m.num})}'|" th:text="${m.studentID }">학번</td>
                    <td th:onclick="|location.href='@{/memberList/detail(num=${m.num})}'|" th:text="${m.department }">학과</td>
                    <td th:onclick="|location.href='@{/memberList/detail(num=${m.num})}'|" th:text="${m.gender}">성별</td>
                    <td th:onclick="|location.href='@{/memberList/detail(num=${m.num})}'|" th:text="${m.phone}">핸드폰</td>
                    <td><label><input type="checkbox"></label></td>
                </tr>
                </tbody>
            </table>

            <div class="margin-top align-center pager">

                <div>
                    <th:block th:if="${startNum>1}">
                        <a th:href="@{/memberList(p=${(startNum-1)}, search=${param.search}, word=${word})}"
                           th:text="이전"></a>
                    </th:block>
                    <th:block th:unless="${startNum>1}">
                        <span onclick="alert('이전 페이지가 없습니다.')" th:text="이전"></span>
                    </th:block>
                </div>

                <ul class="list">
                    <th:block th:each="i : ${#numbers.sequence(0, 4)}">
                        <th:block th:if="${(startNum+i) <= lastNum}">
                            <li><a th:href="@{/memberList(p=${startNum+i}, search=${param.search}, word=${param.word})}"
                                   th:text="${startNum+i}"></a></li>
                        </th:block>
                    </th:block>
                </ul>

                <div>
                    <th:block th:if="${startNum+4<lastNum}">
                        <a th:href="@{/notice(p=${startNum+5}, search=${param.search}, word=${param.word})}"
                           th:text="다음">다음</a>
                    </th:block>
                    <th:block th:if="${startNum+4>=lastNum }">
                        <span class="btn btn-next" onclick="alert('다음 페이지가 없습니다.')">다음</span>
                    </th:block>
                </div>

                <div class="table_footer">
                    <div class="btns">
                        <input type='submit' value="삭제">
                        <!--<button id="deletebtn" class="btn btn-danger btn-lg btn-block" style="float: right;" type="submit" formaction="/delMember">삭제</button>-->
                    </div>
                </div>
        </form>
    </div>
</div>

<div class="footer">
    <p>Footer</p>
</div>

</body>

</html>